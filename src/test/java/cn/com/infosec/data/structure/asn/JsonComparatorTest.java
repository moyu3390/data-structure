/**
 * JsonComparatorTest
 * <p>
 * 1.0
 * <p>
 * 2022/12/30 14:35
 */

package cn.com.infosec.data.structure.asn;

import cn.com.infosec.data.structure.json.IJsonComparator;
import cn.com.infosec.data.structure.json.comparator.JsonComparator;
import cn.com.infosec.data.structure.template.TemplateTestCase;
import cn.com.infosec.data.structure.utils.FileUtil;
import org.junit.Test;

import java.io.IOException;
import java.io.RandomAccessFile;
import java.util.Objects;

public class JsonComparatorTest {
    IJsonComparator jsonComparator = new JsonComparator();

    @Test
    public void jsonCompareTest() {
        String templateFilePath = "cn/com/infosec/data/structure/templates/person.json";
        String destJsonData = FileUtil.readInternalFileContext2String(templateFilePath);
        String srcJsonData = "{\"id\":\"\",\"pId\":\"\",\"path\":\"\",\"tag\":{\"value\":16,\"tagType\":\"PRIVATE\",\"constructed\":true,\"encoding\":[-16]},\"tagNum\":240,\"length\":60,\"isContainer\":true,\"children\":[{\"id\":\"0\",\"pId\":\"\",\"path\":\"/0\",\"tag\":{\"value\":1,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[1]},\"tagNum\":1,\"length\":1,\"isContainer\":false,\"hexValue\":\"FF\",\"tagName\":\"BOOLEAN\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"BOOLEAN\",\"isValidator\":false},{\"id\":\"1\",\"pId\":\"\",\"path\":\"/1\",\"tag\":{\"value\":2,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[2]},\"tagNum\":2,\"length\":1,\"isContainer\":false,\"hexValue\":\"18\",\"tagName\":\"INTEGER\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"2\",\"pId\":\"\",\"path\":\"/2\",\"tag\":{\"value\":17,\"tagType\":\"UNIVERSAL\",\"constructed\":true,\"encoding\":[49]},\"tagNum\":49,\"length\":16,\"isContainer\":true,\"children\":[{\"id\":\"2.0\",\"pId\":\"2\",\"path\":\"/2/0\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":6,\"isContainer\":false,\"hexValue\":\"385998069003\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false},{\"id\":\"2.1\",\"pId\":\"2\",\"path\":\"/2/1\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":6,\"isContainer\":false,\"hexValue\":\"385998069002\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false}],\"tagName\":\"SET\",\"tagClass\":\"UNIVERSAL\",\"isTemplate\":false,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"SET\",\"isValidator\":false},{\"id\":\"3\",\"pId\":\"\",\"path\":\"/3\",\"tag\":{\"value\":1,\"tagType\":\"CONTEXT\",\"constructed\":true,\"encoding\":[-95]},\"tagNum\":161,\"length\":31,\"isContainer\":true,\"children\":[{\"id\":\"3.0\",\"pId\":\"3\",\"path\":\"/3/0\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":true,\"encoding\":[-94]},\"tagNum\":162,\"length\":13,\"isContainer\":true,\"children\":[{\"id\":\"3.0.0\",\"pId\":\"3.0\",\"path\":\"/3/0/0\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":5,\"isContainer\":false,\"hexValue\":\"4669727374\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false},{\"id\":\"3.0.1\",\"pId\":\"3.0\",\"path\":\"/3/0/1\",\"tag\":{\"value\":2,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[2]},\"tagNum\":2,\"length\":1,\"isContainer\":false,\"hexValue\":\"01\",\"tagName\":\"INTEGER\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"3.0.2\",\"pId\":\"3.0\",\"path\":\"/3/0/2\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":false,\"encoding\":[-126]},\"tagNum\":130,\"length\":1,\"isContainer\":false,\"hexValue\":\"FF\",\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false}],\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"isTemplate\":false,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"3.1\",\"pId\":\"3\",\"path\":\"/3/1\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":true,\"encoding\":[-94]},\"tagNum\":162,\"length\":14,\"isContainer\":true,\"children\":[{\"id\":\"3.1.0\",\"pId\":\"3.1\",\"path\":\"/3/1/0\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":6,\"isContainer\":false,\"hexValue\":\"5365636F6E64\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false},{\"id\":\"3.1.1\",\"pId\":\"3.1\",\"path\":\"/3/1/1\",\"tag\":{\"value\":2,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[2]},\"tagNum\":2,\"length\":1,\"isContainer\":false,\"hexValue\":\"02\",\"tagName\":\"INTEGER\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"3.1.2\",\"pId\":\"3.1\",\"path\":\"/3/1/2\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":false,\"encoding\":[-126]},\"tagNum\":130,\"length\":1,\"isContainer\":false,\"hexValue\":\"00\",\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false}],\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"isTemplate\":false,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false}],\"tagName\":\"BOOLEAN\",\"tagClass\":\"CONTEXT\",\"isTemplate\":false,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"BOOLEAN\",\"isValidator\":false},{\"id\":\"4\",\"pId\":\"\",\"path\":\"/4\",\"tag\":{\"value\":3,\"tagType\":\"CONTEXT\",\"constructed\":false,\"encoding\":[-125]},\"tagNum\":131,\"length\":1,\"isContainer\":false,\"hexValue\":\"28\",\"tagName\":\"BIT_STRING\",\"tagClass\":\"CONTEXT\",\"visualValue\":\"\",\"isTemplate\":true,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"BIT_STRING\",\"isValidator\":false}],\"tagName\":\"SEQUENCE\",\"tagClass\":\"PRIVATE\",\"isTemplate\":false,\"nodeIdentity\":\"\",\"dataType\":\"byte[]\",\"nodeAlias\":\"SEQUENCE\",\"isValidator\":false}";
//        String srcJsonData = "{\"id\":\"\",\"pId\":\"\",\"path\":\"\",\"tag\":{\"value\":16,\"tagType\":\"PRIVATE\",\"constructed\":true,\"encoding\":[-16]},\"tagNum\":240,\"length\":60,\"isContainer\":true,\"children\":[{\"id\":\"0\",\"pId\":\"\",\"path\":\"/0\",\"tag\":{\"value\":1,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[1]},\"tagNum\":1,\"length\":1,\"isContainer\":false,\"hexValue\":\"FF\",\"tagName\":\"BOOLEAN\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"BOOLEAN\",\"isValidator\":false},{\"id\":\"1\",\"pId\":\"\",\"path\":\"/1\",\"tag\":{\"value\":2,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[2]},\"tagNum\":2,\"length\":1,\"isContainer\":false,\"hexValue\":\"18\",\"tagName\":\"INTEGER\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"2\",\"pId\":\"\",\"path\":\"/2\",\"tag\":{\"value\":17,\"tagType\":\"UNIVERSAL\",\"constructed\":true,\"encoding\":[49]},\"tagNum\":49,\"length\":16,\"isContainer\":true,\"children\":[{\"id\":\"2.0\",\"pId\":\"2\",\"path\":\"/2/0\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":6,\"isContainer\":false,\"hexValue\":\"385998069003\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false},{\"id\":\"2.1\",\"pId\":\"2\",\"path\":\"/2/1\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":6,\"isContainer\":false,\"hexValue\":\"385998069002\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false}],\"tagName\":\"SET\",\"tagClass\":\"UNIVERSAL\",\"isTemplate\":false,\"dataType\":\"byte[]\",\"nodeAlias\":\"SET\",\"isValidator\":false},{\"id\":\"3\",\"pId\":\"\",\"path\":\"/3\",\"tag\":{\"value\":1,\"tagType\":\"CONTEXT\",\"constructed\":true,\"encoding\":[-95]},\"tagNum\":161,\"length\":31,\"isContainer\":true,\"children\":[{\"id\":\"3.0\",\"pId\":\"3\",\"path\":\"/3/0\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":true,\"encoding\":[-94]},\"tagNum\":162,\"length\":13,\"isContainer\":true,\"children\":[{\"id\":\"3.0.0\",\"pId\":\"3.0\",\"path\":\"/3/0/0\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":5,\"isContainer\":false,\"hexValue\":\"4669727374\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false},{\"id\":\"3.0.1\",\"pId\":\"3.0\",\"path\":\"/3/0/1\",\"tag\":{\"value\":2,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[2]},\"tagNum\":2,\"length\":1,\"isContainer\":false,\"hexValue\":\"01\",\"tagName\":\"INTEGER\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"3.0.2\",\"pId\":\"3.0\",\"path\":\"/3/0/2\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":false,\"encoding\":[-126]},\"tagNum\":130,\"length\":1,\"isContainer\":false,\"hexValue\":\"FF\",\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false}],\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"isTemplate\":false,\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"3.1\",\"pId\":\"3\",\"path\":\"/3/1\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":true,\"encoding\":[-94]},\"tagNum\":162,\"length\":14,\"isContainer\":true,\"children\":[{\"id\":\"3.1.0\",\"pId\":\"3.1\",\"path\":\"/3/1/0\",\"tag\":{\"value\":4,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[4]},\"tagNum\":4,\"length\":6,\"isContainer\":false,\"hexValue\":\"5365636F6E64\",\"tagName\":\"OCTET_STRING\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"OCTET_STRING\",\"isValidator\":false},{\"id\":\"3.1.1\",\"pId\":\"3.1\",\"path\":\"/3/1/1\",\"tag\":{\"value\":2,\"tagType\":\"UNIVERSAL\",\"constructed\":false,\"encoding\":[2]},\"tagNum\":2,\"length\":1,\"isContainer\":false,\"hexValue\":\"02\",\"tagName\":\"INTEGER\",\"tagClass\":\"UNIVERSAL\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false},{\"id\":\"3.1.2\",\"pId\":\"3.1\",\"path\":\"/3/1/2\",\"tag\":{\"value\":2,\"tagType\":\"CONTEXT\",\"constructed\":false,\"encoding\":[-126]},\"tagNum\":130,\"length\":1,\"isContainer\":false,\"hexValue\":\"00\",\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false}],\"tagName\":\"INTEGER\",\"tagClass\":\"CONTEXT\",\"isTemplate\":false,\"dataType\":\"byte[]\",\"nodeAlias\":\"INTEGER\",\"isValidator\":false}],\"tagName\":\"BOOLEAN\",\"tagClass\":\"CONTEXT\",\"isTemplate\":false,\"dataType\":\"byte[]\",\"nodeAlias\":\"BOOLEAN\",\"isValidator\":false},{\"id\":\"4\",\"pId\":\"\",\"path\":\"/4\",\"tag\":{\"value\":3,\"tagType\":\"CONTEXT\",\"constructed\":false,\"encoding\":[-125]},\"tagNum\":131,\"length\":1,\"isContainer\":false,\"hexValue\":\"28\",\"tagName\":\"BIT_STRING\",\"tagClass\":\"CONTEXT\",\"visualValue\":\"\",\"isTemplate\":true,\"dataType\":\"byte[]\",\"nodeAlias\":\"BIT_STRING\",\"isValidator\":false}],\"tagName\":\"SEQUENCE\",\"tagClass\":\"PRIVATE\",\"isTemplate\":false,\"dataType\":\"byte[]\",\"nodeAlias\":\"SEQUENCE\",\"isValidator\":false}";
        // 比较数据与模板的机构是否一致
        boolean compare = jsonComparator.compare(srcJsonData, destJsonData, true);
        System.err.println(compare);

    }
}
